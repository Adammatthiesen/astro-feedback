---
import { FeedbackCategories } from 'astro:db';

interface Props {
	categories: (typeof FeedbackCategories.$inferSelect)[];
}

const { categories } = Astro.props;
---

<section class="bg-white border border-gray-200 p-6 rounded-lg">
    <h2 class="text-xl font-semibold mb-4">Submit Feedback</h2>
    <div>For Demo purposes only (this form is not functional)</div>
    <form id="feedback-form" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="type">Type</label>
                <select id="type" name="type" required>
                    <option value="bug">Bug Report</option>
                    <option value="feature">Feature Request</option>
                    <option value="improvement">Improvement</option>
                    <option value="question">Question</option>
                    <option value="compliment">Compliment</option>
                    <option value="complaint">Complaint</option>
                    <option value="other">Other</option>
                </select>
            </div>

            {
                categories.length > 0 && (
                    <div>
                        <label for="category">Category</label>
                        <select id="category" name="categoryId">
                            <option value="">No category</option>
                            {categories.map((cat) => (
                                <option value={cat.id}>{cat.name}</option>
                            ))}
                        </select>
                    </div>
                )
            }
        </div>

        <div>
            <label for="title">Title</label>
            <input type="text" id="title" name="title" required />
        </div>

        <div>
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="4" required
            ></textarea>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="name">Name (optional)</label>
                <input type="text" id="name" name="name" />
            </div>
            <div>
                <label for="email">Email (optional)</label>
                <input type="email" id="email" name="email" />
            </div>
        </div>

        <button type="submit" class="btn-primary"> Submit Feedback </button>
    </form>

    <div id="submit-result" class="mt-4"></div>
</section>
